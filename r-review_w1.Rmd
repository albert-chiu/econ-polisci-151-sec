---
title: "R Review (ECON/POLISCI 151)"
output: 
  html_document:
    keep_md: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Basics
Recommended IDE is [RStudio](https://www.rstudio.com/products/rstudio/)

Useful file types:

* R script: Basic file containing only code (and comments)
* Markdown files: Mix of text and code (e.g., this file was made using markdown)
  + Code from other languages besides R
  + Multiple output options: HTML, pdf, etc.
  + Include LaTeX code for math: $\forall x\in \mathbb{R}^n, c\in \mathbb{R}, f(cx)=c^kf(x)$

## Packages
Install packages from CRAN:
```{r}
## Comment out code using '#'
#install.packages("PackageName")
```

Attach packages:
```{r}
#require(PackageName)
# or, equivalently,
#library(PackageName)
```

Can use functions from an installed package without attaching it (also a good way to specify package):
```{r}
#PackageName::function()
#DifferentPackage::function()
```

Install packages from github:
```{r}
#devtools::install_github("DeveloperName/PackageName")
```

## Objects and data types
Instantiate new objects:
```{r}
a1 <- 1
print(a1)
a1  # can omit "print()"

# can include multiple commands on one line by separating with ";"
a2 = 2; print(a2)
```

### Logicals/booleans:
```{r}
typeof(TRUE)
T  # TRUE

# checking (in)equality
1 == 1
1 != 1
1 <= 1
1 > 1

# can treat as a number
1+TRUE
1+FALSE
```


### Numbers
```{r}
typeof(1)
typeof(1L)
typeof(as.integer(1))
# "is.integer()" does not check for whole numbers
is.integer(1)
```

Vectors:
```{r}
v1 <- c(1,2,3); v1
v2 <- 1:3; v2

# different data types
typeof(v1); typeof(v2)

# sequence, with step size other than 1
seq(from=1, to=10, by=3)
```

Matrices:
```{r}
## white space does not delimit code; use it for readability
# bad:
mat <- rbind(1:3,           4:6,
             
             
        7:9)

# better:
mat <- rbind(1:3,
             4:6,
             7:9)
mat
typeof(mat)

matrix(1:9, nrow=3, byrow = T)
# Matrix operations:
t(mat)  # transpose
mat * 2  # elementwise multiplication
mat * mat  
mat %*% mat  # matrix multiplication
mat + mat
mat + 1
```

### Characters/strings
```{r}
s1 <- "this is a string"; cat(s1)
typeof(s1)

# some special symbols need to be escaped:
cat("s \ ")
cat("s \\ ")
```

### Factors
Discrete variables
```{r}
f1 <- factor(1:3)
# can specify order
f2 <- factor(1:3, levels=c(2, 1, 3))
sort(f1)
sort(f2)
```

### Dataframes
```{r}
# can accomodate multiple data types
df <- cbind.data.frame(numbers=1:3, words=c("1", "2", "3"))
df

# if we try to do the same with matrices:
cbind(numbers=1:3, words=c("1", "2", "3"))
```
### Lists
```{r}
# can store basically any data together in one object
list("a", 1, lm(1~1))
```

## Manipulating data
Subsetting my location:
```{r}
df[1, 1]  # element in row 1, column 1
df[1, ]  # entire first row
df[, 1]  # entire first column
```

By name:
```{r}
df[, "numbers"]
df$numbers
df[["numbers"]]
```

Appending data:
```{r}
df$new_column1 <- df$numbers+1
df
```

Useful package:
```{r}
require(dplyr)  # also tidyr
df %>% mutate(new_column2 = (numbers <= 2) )
```

## Random variables and probability distributions
Generate random numbers:
```{r}
set.seed(123)  # set seed to ensure reproducibility
runif(n=3, min=0, max=1) # uniform(0, 1)
rnorm(n=3, mean=0, sd=1) # normal(0, 1)
```

Quantiles of a distribution:
```{r}
qnorm(.025, mean=0, sd=1)  # 2.5th quantile of N(0,1)
```

CDF:
```{r}
pnorm(0, mean=0, sd=1) # F(0) = P( N(0,1) < 0 )
```

PDF:
```{r}
dnorm(0, 0, 1) # f(0)
```

## Regression
```{r}
set.seed(123)
x1 <- rnorm(n=10)
x2 <- rnorm(n=10)

Y <- x1 + 2*x2 + rnorm(n=10)

out <- lm(Y ~ x1 + x2)
out$residuals  # model has many things you can extract
summary(out)
coef(out)
confint(out)

# data can also be dataframe
df <- cbind.data.frame(Y, Var1=x1, Var2=x2)
head(df)
fm <- formula(Y~Var1+Var2)
lm(fm, data=df)
lm(Y~., data=df)  # regress Y on all other variables in df

# can transform data
Y <- x1^2 + log(abs(x2)) + rnorm(n=10)
lm(Y ~ Var1^2 + log(abs(Var2)), data=df)

# many other functions take the same formula
df$Y <- rbinom(n=10, size=1, prob=.5)  # binary outcome
glm(fm, data=df, family = binomial(link=probit))  # probit 
```

## Plots
Dot plot:
```{r}
plot(x=x1, y=Y, pch=16,
     xlab="x axis", ylab="y axis")
```

Line
```{r}
plot(x=sort(x1), y=Y[order(x1)], type = "l")
```

Histogram and density
```{r}
x <- rnorm(1000)
hist(x)
plot(density(x))
```
